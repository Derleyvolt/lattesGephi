require 'csv'
require 'byebug'
require 'progress_bar'
require 'rinruby' 

def create_chart(year, max_value, kind_data, with_value=false, sufix="")
unless with_value
R.eval <<END
	library(ggplot2)
	library(reshape2)
	library(scales)
	flow <- read.csv("~/Documents/code/github/lucachaves/lattesGephi/src/flow-edges/gephi/data/edges-flow-#{kind_data}/edges-flow-#{kind_data}-distance-year-#{year}.csv", sep=",",header=T, check.names = FALSE)
	row.names(flow) <- flow$names
	flow <- flow[,2:length(flow[0,])]
	flow_matrix <- data.matrix(flow)
	dat <- melt(flow_matrix, id.var = "X1")
	p <- ggplot(dat, aes(as.factor(Var1), Var2, group=Var2)) +
	  geom_tile(aes(fill = value)) + 
	  scale_fill_continuous(low = "white", high = "red",limits=c(0, #{max_value}), breaks=seq(1,#{max_value},by=#{max_value/6}))+
	  theme(axis.text.x=element_text(angle=-90))+
	  xlab("origin")+ylab("destination")+ggtitle("Flow #{year}")
	ggsave(filename="~/Documents/code/github/lucachaves/lattesGephi/src/flow-edges/gephi/data/edges-flow-#{kind_data}/edges-flow-#{kind_data}-distance-year-#{year}#{sufix}.png", plot=p, width=14, height=10, dpi=300)
END
else
R.eval <<END
	library(ggplot2)
	library(reshape2)
	library(scales)
	flow <- read.csv("~/Documents/code/github/lucachaves/lattesGephi/src/flow-edges/gephi/data/edges-flow-#{kind_data}/edges-flow-#{kind_data}-distance-year-#{year}.csv", sep=",",header=T, check.names = FALSE)
	row.names(flow) <- flow$names
	flow <- flow[,2:length(flow[0,])]
	flow_matrix <- data.matrix(flow)
	dat <- melt(flow_matrix, id.var = "X1")
	p <- ggplot(dat, aes(as.factor(Var1), Var2, group=Var2)) +
	  geom_tile(aes(fill = value)) + 
	  # geom_text(aes(fill = dat$value, label = round(dat$value, 1)))+
	  geom_text(aes(fill = dat$value, label = dat$value))+
	  # scale_fill_gradient(low = "white", high = "red")+
	  scale_fill_continuous(low = "white", high = "red",limits=c(0, #{max_value}), breaks=seq(1,#{max_value},by=#{max_value/6}))+
	  theme(axis.text.x=element_text(angle=-90))+
	  xlab("origin")+ylab("destination")+ggtitle("Flow #{year}")
	ggsave(filename="~/Documents/code/github/lucachaves/lattesGephi/src/flow-edges/gephi/data/edges-flow-#{kind_data}/edges-flow-#{kind_data}-distance-year-#{year}#{sufix}.png", plot=p, width=14, height=10, dpi=300)
END
end
end

def change_value(temp, kind=nil)
	if kind == "log"
		temp = Math.log(temp) 
		temp = 0 if temp == -1.0/0.0
	elsif kind == "cube_root"
		temp = (temp**(1/3.0)).round 
	elsif kind == "square_root"
		temp = (temp**(1/2.0)).round 
	end
	temp
end


# kind_change = "cube_root"
kind_change = ""

kind_index = "code"
# kind_index = "name"

# kind_data = "country"
kind_data = "instituition"

# file = File.read("edges-flow-#{kind_data}-distance-year.csv")
file = File.read("edges-flow-#{kind_data}-distance-year-br.csv")

distinct_rows = {}
flow = []
flow_all = []
# names2 = {}
names = if kind_data == "country"
	{"1"=>"brazil", "7"=>"spain", "2"=>"united states", "5"=>"united kingdom", "4"=>"canada", "11"=>"france", "3"=>"portugal", "19"=>"belgium", "6"=>"uruguay", "8"=>"germany", "20"=>"australia", "10"=>"colombia", "22"=>"belize", "16"=>"argentina", "9"=>"japan", "12"=>"chile", "14"=>"netherlands", "13"=>"italy", "15"=>"peru", "23"=>"denmark", "24"=>"switzerland", "21"=>"sweden", "17"=>"cuba", "18"=>"venezuela"}
elsif "instituition"
	{"284"=>"pontificia universidade catolica do parana", "641"=>"universidade do vale do itajai", "48"=>"universidade presbiteriana mackenzie", "350"=>"universidade do vale do rio dos sinos", "891"=>"universidad de leon", "244"=>"universidade federal fluminense", "159"=>"universidade federal do rio de janeiro", "619"=>"universidade federal de goias", "777"=>"universidade federal de sao carlos", "435"=>"universidade federal rural de pernambuco", "432"=>"universidade federal de pernambuco", "418"=>"universidade estadual de campinas", "787"=>"university of reading", "2"=>"universidade federal de santa catarina", "696"=>"university of illinois at chicago", "602"=>"state university of new york", "18"=>"universidade de sao paulo", "454"=>"universidade federal de sao paulo", "458"=>"universidade federal do rio grande do sul", "378"=>"universidade federal de minas gerais", "260"=>"universidade estadual paulista julio de mesquita filho", "487"=>"universidade estadual do centro oeste", "717"=>"universidade estadual de maringa", "346"=>"universidade federal de pelotas", "383"=>"pontificia universidade catolica de minas gerais", "27"=>"pontificia universidade catolica de sao paulo", "8"=>"universidade do estado de santa catarina", "633"=>"universidade federal do rio grande do norte", "287"=>"universidade federal do parana", "557"=>"universidad complutense de madrid", "53"=>"universidade camilo castelo branco", "549"=>"universidade federal de juiz de fora", "424"=>"centro de pesquisas odontologicas sao leopoldo mandic", "1008"=>"universite de paris x nanterre", "172"=>"universidade do estado do rio de janeiro", "559"=>"universidad politecnica de madrid", "128"=>"centro sao camilo de desenvolvimento em administracao da saude", "699"=>"universidade federal do maranhao", "237"=>"universidade federal de uberlandia", "94"=>"faculdade de educacao da universidade de sao paulo", "83"=>"instituto sirio libanes de ensino e pesquisa", "505"=>"faculdade de medicina de ribeirao preto universidade de sao paulo", "564"=>"universidade federal da paraiba", "166"=>"pontificia universidade catolica do rio de janeiro", "707"=>"universidade do estado do amazonas", "1040"=>"universidade da regiao de joinville", "669"=>"universidade estadual de londrina", "165"=>"universidade gama filho", "361"=>"universidade federal da bahia", "323"=>"universidade de brasilia", "766"=>"universidade estadual de ponta grossa", "589"=>"universidade federal de mato grosso", "365"=>"universidade do estado da bahia", "697"=>"universidade regional integrada do alto uruguai e das missoes", "488"=>"universidade federal de santa maria", "675"=>"universidade de passo fundo", "816"=>"universitat stuttgart", "290"=>"universidade tecnologica federal do parana", "965"=>"the university of queensland", "908"=>"universidade de santa cruz do sul", "954"=>"oklahoma state university", "899"=>"universidade do extremo sul catarinense", "464"=>"pontificia universidade catolica do rio grande do sul", "613"=>"university of london", "890"=>"purdue university", "167"=>"universidade federal do estado do rio de janeiro", "297"=>"universidade tuiuti do parana", "50"=>"escola superior de propaganda e marketing", "570"=>"universidade federal do ceara", "882"=>"university of leeds", "642"=>"universidade do oeste paulista", "315"=>"universidade federal do espirito santo", "5"=>"university of ottawa", "592"=>"universidade federal de vicosa", "885"=>"universidade regional do noroeste do estado do rio grande do sul", "992"=>"universidad de alicante", "409"=>"universidade federal do para", "527"=>"universite paris diderot", "612"=>"universidad de chile", "847"=>"universidade federal do rio grande", "475"=>"university of california los angeles", "496"=>"faculdade de medicina de ribeirao preto da universidade de sao paulo", "825"=>"universite montpellier 2 sciences et techniques", "206"=>"centro brasileiro de pesquisas fisicas", "1055"=>"institut national polytechnique de lorraine", "824"=>"university of waterloo", "812"=>"universite libre de bruxelles", "905"=>"delft university of technology", "771"=>"duke university", "948"=>"oregon state university", "706"=>"instituto nacional de pesquisas da amazonia", "850"=>"universidad de cadiz", "541"=>"universidad autonoma de barcelona", "4"=>"universidade do minho", "14"=>"universidade federal de lavras", "660"=>"universidade tecnica de lisboa", "740"=>"universidade federal do triangulo mineiro", "504"=>"faculdade de medicina de ribeirao preto usp", "906"=>"texas a&m university system", "836"=>"university of manchester institute of science and technology", "483"=>"technische universitat berlin", "555"=>"universidade federal rural do rio de janeiro", "714"=>"universite de technologie de compiegne", "999"=>"loughborough university", "519"=>"centre national de la recherche scientifique", "653"=>"instituto tecnologico de aeronautica", "745"=>"university of illinois at urbana champaign", "185"=>"instituto universitario de pesquisas do rio de janeiro", "584"=>"universita degli studi di roma tor vergata", "271"=>"faculdade de odontologia de bauru da universidade de sao paulo", "939"=>"university of east anglia", "715"=>"university of alberta", "651"=>"instituto nacional de pesquisas espaciais", "546"=>"universita degli studi di padova", "883"=>"university of miami", "982"=>"the university of melbourne", "631"=>"katholieke universiteit leuven", "903"=>"institut national polytechnique de toulouse", "686"=>"universidad de sevilla", "978"=>"universite de rennes i", "814"=>"university of north carolina system", "678"=>"university of florida", "705"=>"universidade federal do amazonas", "571"=>"universidade estadual do ceara", "880"=>"fundacao universidade regional de blumenau", "604"=>"universidade para o desenvolvimento do estado e da regiao do pantanal", "603"=>"universidade federal de mato grosso do sul", "481"=>"johns hopkins university", "967"=>"universite laval", "13"=>"cornell university", "953"=>"university of california berkeley", "168"=>"associacao instituto nacional de matematica pura e aplicada", "511"=>"faculdade de ciencias farmaceuticas de ribeirao preto usp", "837"=>"university of manchester", "283"=>"fundacao oswaldo cruz", "755"=>"universidade de franca", "868"=>"faculdade de educacao sao luis", "772"=>"universidade federal de ouro preto", "924"=>"universidade estadual do norte fluminense darcy ribeiro", "391"=>"fundacao joao pinheiro", "595"=>"universidade de aveiro", "759"=>"universidade federal de itajuba", "806"=>"universidade federal de campina grande", "484"=>"universidade vale do rio verde de tres coracoes", "840"=>"universidade federal de alfenas", "364"=>"universidade salvador", "355"=>"university of minnesota system", "421"=>"instituto agronomico de campinas", "15"=>"escola superior de agricultura de lavras", "687"=>"university of wisconsin madison", "518"=>"universite paris 1 pantheon sorbonne", "414"=>"universidade federal rural da amazonia", "485"=>"universidade vale do rio verde", "179"=>"instituto militar de engenharia", "17"=>"instituto de pesquisas energeticas e nucleares", "103"=>"instituto de fisica da universidade de sao paulo", "754"=>"universidade federal do abc", "611"=>"university of california davis", "751"=>"universidade do grande abc", "65"=>"faculdade de medicina da usp", "691"=>"universidade metodista de piracicaba", "3"=>"university of pennsylvania", "79"=>"escola politecnica da universidade de sao paulo", "55"=>"escola de enfermagem da universidade de sao paulo", "580"=>"universidad de buenos aires", "34"=>"fundacao getulio vargas sp", "275"=>"faculdade de odontologia de bauru", "1067"=>"university of guelph", "64"=>"instituto de psicologia da universidade de sao paulo", "422"=>"pontificia universidade catolica de campinas", "104"=>"faculdade de odontologia da universidade de sao paulo", "482"=>"freie universitat berlin", "90"=>"faculdade de saude publica da universidade de sao paulo", "85"=>"escola politecnica da usp", "790"=>"george washington university", "657"=>"politecnico di milano", "1052"=>"universidade de extremadura", "728"=>"faculdade de medicina de sao jose do rio preto", "49"=>"escola paulista de medicina", "325"=>"universidade catolica de brasilia", "572"=>"universidade de fortaleza", "512"=>"faculdade de odontologia de ribeirao preto", "856"=>"university of pittsburgh", "57"=>"universidade cidade de sao paulo", "960"=>"university of birmingham", "124"=>"universidade anhembi morumbi", "545"=>"universidad de santiago de chile", "78"=>"escola de engenharia de sao carlos", "996"=>"faculdade de medicina", "763"=>"universidade metodista de sao paulo", "46"=>"faculdade de ciencias medicas da santa casa de sao paulo", "303"=>"faculdade evangelica do parana", "164"=>"escola nacional de saude publica", "52"=>"instituto de pesquisas tecnologicas do estado de sao paulo", "88"=>"faculdade de economia administracao e contabilidade usp", "87"=>"universidade cruzeiro do sul", "157"=>"universidade anhanguera de sao paulo", "480"=>"university of california", "732"=>"university of michigan", "857"=>"carnegie mellon university", "676"=>"colorado state university system", "1033"=>"colorado state university", "506"=>"faculdade de medicina de ribeirao preto", "940"=>"ludwig maximilians universitat munchen", "43"=>"associacao de medicina intensiva brasileira", "495"=>"universidade de ribeirao preto", "1021"=>"ruprecht karls universitat heidelberg", "30"=>"fundacao antonio prudente", "39"=>"instituto de assistencia medica ao servidor publico estadual", "106"=>"hospital das clinicas da fmusp", "354"=>"harvard university", "798"=>"faculdade de ciencias medicas e biologicas de botucatu", "40"=>"hospital das clinicas da faculdade de medicina da universidade de sao paulo", "936"=>"faculdade de ciencias da saude", "51"=>"hospital do servidor publico estadual de sao paulo", "1146"=>"universidad nacional de trujillo", "1133"=>"university of essex", "252"=>"universidade catolica de santos", "854"=>"universidade sao francisco", "846"=>"universidade do sul de santa catarina", "522"=>"universite paris descartes", "720"=>"universidade federal do piaui", "738"=>"universidade federal do acre", "58"=>"universidade de santo amaro", "68"=>"hospital heliopolis unidade de gestao assistencial 1", "805"=>"universidade estadual da paraiba", "122"=>"conselho brasileiro de oftalmologia", "190"=>"fundacao getulio vargas matriz", "438"=>"universidade de pernambuco", "456"=>"faculdades integradas de guarulhos", "253"=>"universidade metropolitana de santos", "363"=>"escola bahiana de medicina e saude publica", "614"=>"university college london", "155"=>"instituto de biociencias da usp", "931"=>"universidade estadual vale do acarau", "640"=>"university of toronto", "817"=>"michigan state university", "388"=>"centro federal de educacao tecnologica de minas gerais", "163"=>"universidade candido mendes", "976"=>"universitat politecnica de valencia", "583"=>"universita degli studi di roma la sapienza", "256"=>"centro universitario lusiada", "558"=>"universidad nacional de educacion a distancia", "72"=>"fundacao armando alvares penteado", "360"=>"universidade estadual de santa cruz", "774"=>"faculdade de medicina de marilia", "54"=>"faculdade de arquitetura e urbanismo da universidade de sao paulo", "47"=>"fundacao getulio vargas", "1053"=>"centro universitario de sete lagoas", "792"=>"universidade de mogi das cruzes", "255"=>"faculdade de ciencias medicas de santos", "780"=>"universidade de sao paulo escola de engenharia de sao carlos", "343"=>"centro universitario do distrito federal", "901"=>"the state university of new jersey new brunswick", "192"=>"universidade santa ursula", "84"=>"centro universitario senac", "834"=>"university of illinois system", "195"=>"sociedade brasileira de cardiologia", "544"=>"pontificia universidad catolica de chile", "659"=>"universidade de lisboa", "1095"=>"centro universitario fieo", "909"=>"centro universitario de caratinga", "92"=>"fundacao escola de sociologia e politica de sao paulo", "762"=>"centro universitario da fei", "800"=>"instituto de biociencias", "1032"=>"universidad del valle", "935"=>"faculdade de medicina veterinaria e zootecnia", "74"=>"universidade paulista", "957"=>"georgia institute of technology", "779"=>"escola de engenharia de sao carlos usp", "915"=>"the university of texas at austin", "793"=>"universidade braz cubas", "508"=>"centro universitario moura lacerda", "677"=>"university of nottingham", "839"=>"universidade salgado de oliveira", "486"=>"universidad de antioquia", "223"=>"faculdade de humanidades pedro ii", "24"=>"instituto israelita de ensino e pesquisa albert einstein", "916"=>"university of texas system", "786"=>"instituto de quimica de sao carlos usp", "599"=>"university of chicago", "848"=>"faculdade de medicina de jundiai", "352"=>"universidade de taubate", "520"=>"universite paris sorbonne", "89"=>"university of cambridge", "886"=>"universite paris 8 vincennes saint denis", "76"=>"faculdade de direito da universidade de sao paulo", "100"=>"associacao medica brasileira", "773"=>"universidade de marilia", "45"=>"hospital das clinicas da faculdade de medicina da usp", "497"=>"hospital das clinicas da faculdade de medicina de ribeirao preto", "1135"=>"faculdade de zootecnia e engenharia de alimentos", "29"=>"instituto dante pazzanese de cardiologia", "556"=>"departamento de engenharia quimica", "509"=>"hospital das clinicas da faculdade de medicina de ribeirao preto usp", "887"=>"universita degli studi di firenze", "963"=>"university of utah", "110"=>"fundacao jorge duprat figueiredo de seguranca e medicina do trabalho", "934"=>"universidad nacional mayor de san marcos", "733"=>"university of michigan ann arbor", "502"=>"escola de enfermagem de ribeirao preto usp", "507"=>"faculdade de ciencias farmaceuticas de ribeirao preto", "694"=>"centro de energia nuclear na agricultura", "700"=>"universidade estadual do maranhao", "627"=>"universidade federal de alagoas", "1066"=>"universidade severino sombra", "884"=>"ohio state university", "991"=>"florida state university", "1026"=>"utrecht university", "815"=>"north carolina state university", "146"=>"faculdade de filosofia letras e ciencias humanas", "993"=>"university of surrey", "478"=>"city university of new york", "668"=>"boston university", "802"=>"university of california system", "82"=>"faculdade de ciencias farmaceuticas da universidade de sao paulo", "531"=>"universite paris ouest nanterre la defense", "358"=>"university of tokyo", "277"=>"faculdade de odontologia de bauru usp", "476"=>"columbia university", "1142"=>"rice university", "791"=>"indiana university", "191"=>"fundacao dom cabral", "990"=>"kyoto university", "147"=>"faculdade de filosofia letras e ciencias humanas da usp", "150"=>"instituto de quimica da universidade de sao paulo", "650"=>"university of iowa", "554"=>"universite paris sud 11", "941"=>"technische universitat munchen", "134"=>"escola de enfermagem da usp", "913"=>"auburn university", "500"=>"escola de enfermagem de ribeirao preto da universidade de sao paulo", "543"=>"stanford university", "799"=>"faculdade de medicina de botucatu unesp", "638"=>"university of sheffield", "804"=>"university of washington", "1016"=>"university of copenhagen", "865"=>"brown university", "661"=>"instituto superior tecnico", "600"=>"eberhard karls universitat tubingen", "280"=>"universidad de salamanca", "803"=>"university of oxford", "153"=>"instituto de astronomia geofisica e ciencias atmosfericas", "986"=>"universite de poitiers", "121"=>"faculdade de saude publica", "785"=>"instituto de quimica de sao carlos", "455"=>"universidade de guarulhos", "81"=>"comissao nacional de energia nuclear", "749"=>"universidade federal de sergipe", "521"=>"universite sorbonne nouvelle paris 3", "73"=>"instituto de ciencias biomedicas da universidade de sao paulo", "123"=>"instituto de matematica e estatistica", "920"=>"the university of sydney", "593"=>"universidade estadual do oeste do parana", "828"=>"university of strathclyde", "35"=>"universidade sao judas tadeu", "618"=>"imperial college of science technology and medicine", "209"=>"observatorio nacional", "870"=>"universidad de granada", "783"=>"instituto de fisica de sao carlos", "514"=>"universidade de sao paulo ribeirao preto", "26"=>"associacao paulista de cirurgioes dentistas", "679"=>"faculdade de odontologia de araraquara", "77"=>"faculdade de saude publica da usp", "142"=>"faculdade autonoma de direito", "56"=>"faculdade de educacao da usp", "652"=>"universidade do vale do paraiba", "479"=>"new school for social research", "849"=>"university of virginia", "1028"=>"universidad de castilla la mancha", "412"=>"universidade da amazonia", "606"=>"universidade catolica dom bosco", "272"=>"instituicao toledo de ensino", "111"=>"faculdades metropolitanas unidas", "145"=>"escola de comunicacoes e artes da universidade de sao paulo", "118"=>"fac de filosofia letras e ciencias humanas usp", "274"=>"hospital de reabilitacao de anomalias craniofaciais", "108"=>"universidade bandeirante de sao paulo", "177"=>"instituto nacional de cancer", "31"=>"instituto de ciencias biomedicas", "32"=>"instituto de botanica", "442"=>"universidade catolica de pernambuco", "33"=>"irmandade da santa casa de misericordia de sao paulo", "987"=>"universidade municipal de sao caetano do sul", "132"=>"universidade nove de julho", "331"=>"escola nacional de administracao publica", "116"=>"faculdade casper libero", "114"=>"universidade federal de sao paulo escola paulista de medicina", "539"=>"universidade de barcelona", "587"=>"pontificia universidade gregoriana", "36"=>"centro universitario assuncao", "351"=>"escola superior de teologia", "37"=>"centro estadual de educacao tecnologica paula souza", "38"=>"hospital do servidor publico estadual", "827"=>"university of glasgow", "42"=>"universidade sao marcos", "465"=>"instituto de cardiologia do rio grande do sul", "407"=>"santa casa de misericordia de sao paulo", "688"=>"university of rochester", "573"=>"escola de saude publica do ceara", "896"=>"instituto do coracao", "240"=>"faculdade de medicina da universidade federal de minas gerais", "665"=>"instituto universitario de lisboa", "950"=>"university of warwick", "293"=>"universidade positivo", "477"=>"new york university", "542"=>"universitat politecnica de catalunya barcelona tech", "1051"=>"florida christian university", "371"=>"fundacao visconde de cairu", "997"=>"universidad nacional de misiones", "457"=>"universidade guarulhos", "62"=>"policia militar do estado de sao paulo", "797"=>"faculdade de medicina de botucatu", "743"=>"university of california san diego", "70"=>"instituto biologico", "254"=>"centro universitario monte serrat", "269"=>"faculdade de odontologia de bauru universidade de sao paulo", "510"=>"escola de enfermagem de ribeirao preto", "753"=>"faculdade de medicina do abc", "91"=>"colegio brasileiro de cirurgioes", "469"=>"fundacao universidade federal de ciencias da saude de porto alegre", "663"=>"universidade nova de lisboa", "95"=>"centro universitario adventista de sao paulo", "98"=>"instituto oceanografico da universidade de sao paulo", "41"=>"universidade estadual de feira de santana", "105"=>"escola de administracao de empresas de sao paulo", "239"=>"centro universitario do triangulo", "499"=>"faculdade de odontologia de ribeirao preto usp", "133"=>"instituto de geociencias", "568"=>"universidad de la habana", "823"=>"universidade luterana do brasil", "141"=>"instituto de fisica", "156"=>"fundacao instituto de fisica teorica", "819"=>"westfalische wilhelms universitat munster", "181"=>"instituto fernandes figueira", "362"=>"universidade catolica do salvador", "200"=>"instituto de biofisica carlos chagas filho", "523"=>"universite de paris iv paris sorbonne", "662"=>"faculdade de ciencias da universidade de lisboa", "204"=>"universidade do rio de janeiro", "193"=>"escola nacional de ciencias estatisticas", "169"=>"universidade estacio de sa", "684"=>"universidade catolica de petropolis", "217"=>"centro federal de educacao tecnologica celso suckow da fonseca", "862"=>"universitat freiburg", "851"=>"universite de strasbourg", "201"=>"santa casa de misericordia do rio de janeiro", "561"=>"universidad nacional de la plata", "286"=>"associacao brasileira de odontologia", "171"=>"fundacao getulio vargas rj", "451"=>"centro universitario herminio ometto de araras", "226"=>"escola naval", "656"=>"universita degli studi di milano", "689"=>"universidade do grande rio", "205"=>"instituto de pesquisa jardim botanico do rio de janeiro", "517"=>"universite pierre et marie curie", "474"=>"university of southern california", "1037"=>"universidad del pais vasco", "176"=>"instituto oswaldo cruz", "562"=>"universidad nacional de rosario", "682"=>"laboratorio nacional de computacao cientifica", "1058"=>"universite joseph fourier grenoble i", "1029"=>"university of sussex", "537"=>"universitat de barcelona", "964"=>"goethe universitat frankfurt am main", "493"=>"yale university", "914"=>"princeton university", "888"=>"universite bordeaux 1 sciences et technologies", "211"=>"universidade estadual do rio de janeiro", "692"=>"faculdade de odontologia de piracicaba unicamp", "955"=>"university of liverpool", "979"=>"lund university", "843"=>"universidad de santiago de compostela", "1045"=>"university of leicester", "1096"=>"university of southampton", "381"=>"centro de pesquisas rene rachou", "947"=>"gottfried wilhelm leibniz universitat hannover", "1027"=>"karlsruher institut fur technologie", "902"=>"universite toulouse iii paul sabatier", "243"=>"instituto de quimica", "942"=>"university of aberdeen", "983"=>"newcastle university", "620"=>"pontificia universidade catolica de goias", "984"=>"universidade iguacu", "1125"=>"rheinische friedrich wilhelms universitat bonn", "585"=>"pontificia universita gregoriana", "608"=>"universidade do porto", "219"=>"fundacao tecnico educacional souza marques", "588"=>"pontificia universitas gregoriana", "919"=>"vanderbilt university", "952"=>"university of california at berkeley", "744"=>"university of illinois", "796"=>"university of georgia", "818"=>"pennsylvania state university", "1039"=>"lancaster university", "569"=>"universidade de havana", "826"=>"politecnico di torino", "322"=>"faculdade de educacao", "170"=>"escola superior de guerra", "525"=>"universite de paris vii universite denis diderot", "197"=>"escola de guerra naval", "1007"=>"universite du quebec a montreal", "1100"=>"university of maryland at college park", "449"=>"rede nordeste de biotecnologia", "601"=>"universidad central de venezuela", "922"=>"petroleo brasileiro rio de janeiro", "182"=>"escola de aperfeicoamento de oficiais", "188"=>"universidade castelo branco", "367"=>"escola baiana de medicina e saude publica", "439"=>"instituto materno infantil de pernambuco", "198"=>"instituto nacional da propriedade industrial", "648"=>"universidade de caxias do sul", "866"=>"universidade estadual de montes claros", "242"=>"hospital das clinicas da universidade federal de minas gerais", "533"=>"faculdade de engenharia quimica de lorena", "1011"=>"universidade de sorocaba", "257"=>"universidad de la republica uruguay", "258"=>"universidad de la republica", "879"=>"universidad de concepcion", "820"=>"university system of maryland", "959"=>"consejo superior de investigaciones cientificas", "366"=>"centro de pesquisa goncalo moniz fiocruz", "972"=>"universidade federal da grande dourados", "877"=>"faculdades integradas claretianas", "911"=>"fundacao universidade federal do tocantins", "270"=>"universidade do sagrado coracao", "829"=>"universidade federal de rondonia", "1031"=>"universidad de murcia", "1148"=>"kansas state university", "876"=>"faculdade de filosofia ciencias e letras de rio claro", "801"=>"faculdade de ciencias agronomicas", "1073"=>"university of kansas", "1050"=>"universidade federal dos vales do jequitinhonha e mucuri", "273"=>"sociedade de promocao social do fissurado labio palatal", "807"=>"universidade regional do nordeste", "281"=>"universidade de salamanca", "734"=>"universidade tiradentes", "282"=>"universidad de valladolid", "440"=>"centro de pesquisas aggeu magalhaes", "311"=>"faculdades integradas do brasil", "353"=>"faculdade dehoniana", "586"=>"pontificia universidade lateranense", "693"=>"faculdade de odontologia de piracicaba", "300"=>"faculdades pequeno principe", "1081"=>"universite de lorraine", "1110"=>"universidade estadual do norte do parana", "998"=>"universidade do algarve", "667"=>"harvard medical school", "907"=>"texas a&m university", "842"=>"universidade de santiago de compostela", "1065"=>"universidad central marta abreu de las villas", "319"=>"escola superior de ciencias da santa casa de misericordia de vitoria", "781"=>"escola de engenharia de sao carlos universidade de sao paulo", "910"=>"universidade federal do tocantins", "1020"=>"mississippi state university", "327"=>"centro universitario de brasilia", "1030"=>"conservatoire national des arts et metiers", "974"=>"universite paris est creteil val de marne", "1047"=>"universite lumiere lyon 2", "1086"=>"ecole polytechnique federale de lausanne", "956"=>"emory university", "1144"=>"university of st andrews", "347"=>"universidade catolica de pelotas", "968"=>"university of kentucky", "980"=>"universidade federal de roraima", "441"=>"universidade anhanguera uniderp", "536"=>"universitat autonoma de barcelona uab", "356"=>"university of minnesota", "359"=>"universidade estadual do sudoeste da bahia", "431"=>"faculdade de ciencias economicas", "1087"=>"universidade federal do reconcavo da bahia", "376"=>"faculdade visconde de cairu", "1127"=>"the university of western ontario", "788"=>"universita di bologna", "1049"=>"universidade federal dos vales do jequitinhonha e mucuri campus jk", "813"=>"university of edinburgh", "716"=>"tulane university", "853"=>"universidade federal de sao joao del rei", "406"=>"centro de desenvolvimento da tecnologia nuclear", "395"=>"centro de pesquisas rene rachou fiocruz", "949"=>"university of bristol", "1114"=>"cranfield university", "789"=>"georgetown university", "1002"=>"universite de tours universite francois rabelais", "994"=>"universite de paris xi paris sud", "1122"=>"institut national polytechnique de grenoble", "404"=>"universidade fumec", "390"=>"instituto de ensino e pesquisa da santa casa de belo horizonte", "385"=>"universidade do estado de minas gerais", "387"=>"faculdade jesuita de filosofia e teologia", "609"=>"faculdade de engenharia da universidade do porto", "878"=>"iowa state university", "635"=>"universidade potiguar", "535"=>"faculdade salesiana de filosofia ciencias e letras de lorena", "966"=>"christian albrechts universitat zu kiel", "995"=>"faculdade de odontologia", "937"=>"university of arizona", "739"=>"ghent university", "443"=>"faculdade frassinetti do recife", "538"=>"universidad de barcelona", "844"=>"universidad de cordoba espanha", "437"=>"faculdade de odontologia de pernambuco", "452"=>"centro universitario herminio ometto", "463"=>"hospital de clinicas de porto alegre", "845"=>"hospital nossa senhora da conceicao", "471"=>"fundacao universitaria de cardiologia", "466"=>"conselho federal de odontologia", "183"=>"universidade da forca aerea", "501"=>"faculdade de filosofia ciencias e letras de ribeirao preto usp", "1106"=>"universiteit van amsterdam", "503"=>"faculdade de filosofia ciencias e letras de ribeirao preto", "498"=>"faculdade de odontologia de ribeirao preto da universidade de sao paulo", "516"=>"universidade de paris i pantheon sorbonne", "530"=>"universite de paris iii sorbonne nouvelle", "532"=>"escola de engenharia de lorena", "1120"=>"universidad de oriente", "1064"=>"universitat zu koln", "943"=>"universidade do estado do rio grande do norte", "563"=>"universidad nacional del litoral", "617"=>"imperial college london", "567"=>"universidade da beira interior", "1003"=>"university of colorado", "581"=>"universidade de buenos aires", "726"=>"faculdade catolica de anapolis", "1085"=>"hokkaido university", "1092"=>"colorado school of mines", "615"=>"imperial college london south kensington campus", "725"=>"universidade estadual de goias", "673"=>"universidade norte do parana", "867"=>"faculdade de ciencias agrarias e veterinarias", "869"=>"university of british columbia", "893"=>"virginia tech", "1038"=>"universidad nacional del sur", "1101"=>"seminario adventista latino americano de teologia", "672"=>"faculdade teologica sul americana", "929"=>"faculdade global de umuarama", "872"=>"institut national de la recherche agronomique", "750"=>"universitat hamburg", "756"=>"centro universitario de franca", "1048"=>"leiden university", "938"=>"universidad nacional de cordoba argentina", "830"=>"fundacao universidade federal de rondonia", "894"=>"universidade do estado de mato grosso", "1022"=>"universidad de vigo", "933"=>"universidade sao francisco itatiba", "863"=>"albert ludwigs universitat freiburg", "985"=>"universidad del oriente cuba", "1013"=>"arizona state university", "329"=>"ministerio da saude", "758"=>"universitat erlangen nurnberg friedrich alexander", "314"=>"centro universitario curitiba", "921"=>"universidade do contestado", "1129"=>"university of york", "951"=>"instituto federal de educacao ciencia e tecnologia do parana", "632"=>"wageningen university", "529"=>"universite de paris viii", "1078"=>"faculdade redentor", "1019"=>"universidade do vale do sapucai", "900"=>"universite de geneve", "1140"=>"universidad nacional de colombia bogota", "96"=>"faculdades oswaldo cruz", "969"=>"faculdade de odontologia de aracatuba", "99"=>"centro universitario das faculdades metropolitanas unidas", "1099"=>"universidade de evora", "44"=>"instituto butantan", "127"=>"colegio dante alighieri", "597"=>"fundacao educacional de barretos", "148"=>"centro universitario fecap", "139"=>"universidade ibirapuera", "199"=>"instituto brasileiro de mercado de capitais", "63"=>"escola politecnica", "7909"=>"universite de toulouse ii le mirail", "784"=>"instituto de ciencias matematicas e de computacao", "61"=>"faculdade de medicina veterinaria e zootecnia da universidade de sao paulo", "302"=>"centro universitario campos de andrade", "28"=>"instituto sedes sapientiae", "115"=>"centro universitario salesiano sao paulo", "680"=>"centro universitario de araraquara", "339"=>"conselho federal de medicina", "730"=>"fundacao faculdade regional de medicina de sao jose do rio preto", "66"=>"insper instituto de ensino e pesquisa", "646"=>"universidade feevale", "59"=>"instituto adolfo lutz", "213"=>"universidade veiga de almeida", "7928"=>"faculdade de engenharia de guaratingueta", "109"=>"universidade mackenzie", "80"=>"faculdade fia de administracao e negocios", "1187"=>"instituto de radioprotecao e dosimetria", "1173"=>"prefeitura municipal de sao paulo", "989"=>"escola de engenharia maua", "107"=>"centro universitario barao de maua jardim paulista", "7934"=>"universidade catolica de goias", "977"=>"university of calgary", "1025"=>"universite claude bernarde lyon 1", "658"=>"universidade lusofona de humanidades e tecnologias", "904"=>"universite de toulouse iii paul sabatier", "357"=>"japan international cooperation agency", "1083"=>"universidad industrial de santander", "202"=>"instituto metodista bennett", "189"=>"instituto brasileiro de medicina de reabilitacao", "526"=>"universite paris 13 paris nord campus de villetaneuse", "748"=>"universidad de navarra", "1189"=>"instituto superior de educacao do rio de janeiro", "838"=>"centro universitario do sul de minas", "898"=>"university of notre dame", "1010"=>"syracuse university", "7918"=>"centro universitario fluminense", "552"=>"centro de ensino superior de juiz de fora", "214"=>"associacao brasileira de psiquiatria", "93"=>"faculdade de tecnologia de sao paulo", "639"=>"universidad nacional de colombia", "251"=>"universidade santa cecilia", "1046"=>"universita di pisa", "973"=>"universidad de oviedo", "701"=>"instituto federal do maranhao", "489"=>"centro universitario franciscano", "1218"=>"fundacao joaquim nabuco", "295"=>"centro federal de educacao tecnologica do parana", "289"=>"escola de musica e belas artes do parana", "294"=>"faculdade catolica de administracao e economia", "7944"=>"faculdade de filosofia ciencias e letras de alegre", "776"=>"fundacao de ensino euripides soares da rocha", "7935"=>"uppsala universitet", "871"=>"northwestern university", "1229"=>"universidade federal do amapa", "7910"=>"faculdade cenecista de varginha", "971"=>"universidade estadual de mato grosso do sul", "852"=>"instituto federal sul rio grandense", "1136"=>"universidad de deusto", "1088"=>"university of kent", "392"=>"faculdade de ciencias medicas de minas gerais", "7933"=>"centro universitario de patos de minas", "410"=>"museu paraense emilio goeldi", "760"=>"escola de enfermagem wenceslau braz", "425"=>"instituto de tecnologia de alimentos", "1071"=>"instituto nacional de telecomunicacoes", "761"=>"faculdade de medicina de itajuba", "1151"=>"university of massachusetts amherst", "1107"=>"faculdade de ciencias da administracao de garanhuns", "470"=>"centro universitario metodista", "1044"=>"centro universitario sao camilo campus pompeia", "768"=>"colegio sao jose", "861"=>"universidade do planalto catarinense", "565"=>"centro universitario de joao pessoa", "1009"=>"universidade regional do cariri", "1035"=>"faculdade de direito do vale do rio doce", "670"=>"centro de estudos superiores de londrina", "961"=>"universidade da regiao da campanha", "60"=>"centro universitario belas artes de sao paulo", "207"=>"hospital dos servidores do estado do rio de janeiro", "9120"=>"universidade federal de sao paulo campus diadema", "154"=>"instituto de biociencias da universidade de sao paulo", "1036"=>"centro universitario claretiano de batatais", "69"=>"centro universitario sao camilo", "125"=>"colegio rio branco", "928"=>"universidade paranaense", "71"=>"centro brasileiro de analise e planejamento", "75"=>"hospital do servidor publico municipal", "7953"=>"faculdade campo limpo paulista", "644"=>"universidad de zaragoza", "8999"=>"centro universitario capital", "129"=>"colegio visconde de porto seguro", "136"=>"faculdade mozarteum de sao paulo", "1176"=>"centro universitario sant anna", "1175"=>"centro universitario paulistano", "9065"=>"faculdade de educacao e ciencias gerenciais de sumare", "958"=>"utah state university", "1023"=>"faculdade de medicina de catanduva", "1172"=>"hospital israelita albert einstein", "841"=>"universidade jose do rosario vellano", "158"=>"instituto sao paulo de estudos superiores", "427"=>"faculdade de odontologia sao leopoldo mandic", "1061"=>"colegio bandeirantes", "259"=>"conselho nacional de desenvolvimento cientifico e tecnologico", "764"=>"faculdade de direito de sao bernardo do campo", "988"=>"instituto maua de tecnologia", "140"=>"faculdade teologica batista de sao paulo", "429"=>"instituto presbiteriano mackenzie", "7947"=>"faculdades adamantinenses integradas", "8983"=>"faculdade mario schenberg", "1178"=>"faculdade de enfermagem do hospital israelita albert einstein", "741"=>"universidade de uberaba", "8931"=>"instituto de ciencias exatas", "765"=>"faculdade de sao bernardo do campo", "101"=>"federacao brasileira das sociedades de ginecologia e obstetricia sp", "411"=>"universidade do estado do para", "9083"=>"faculdades integradas de ciencias humanas saude e educacao de guarulhos", "1"=>"associacao dos diplomados da escola superior de guerra", "1063"=>"faculdade de filosofia nossa senhora medianeira", "25"=>"hospital sirio libanes", "7921"=>"centro universitario do instituto maua de tecnologia", "975"=>"universidade de valencia", "120"=>"museu de zoologia da universidade de sao paulo", "7913"=>"the university of new mexico", "7892"=>"centro universitario luterano de manaus", "1150"=>"australian national university", "610"=>"faculdade de letras da universidade do porto", "194"=>"petroleo brasileiro rio de janeiro matriz", "560"=>"universidad carlos iii de madrid", "67"=>"federacao brasileira das sociedades de ginecologia e obstetricia rj", "9082"=>"instituto de medicina integral professor fernando figueira", "8922"=>"faculdade de economia e financas do rio de janeiro", "1070"=>"faculdade de filosofia ciencias e letras", "494"=>"centro universitario barao de maua", "513"=>"hospital das clinicas de ribeirao preto", "637"=>"case western reserve university", "9051"=>"faculdade de ciencias humanas e sociais", "8939"=>"centro de pesquisa aggeu magalhaes fiocruz", "822"=>"centro universitario la salle canoas", "389"=>"fundacao hospitalar do estado de minas gerais", "248"=>"centro universitario plinio leite", "874"=>"universidade presidente antonio carlos", "382"=>"centro universitario newton paiva", "9111"=>"faculdade de direito de ipatinga", "341"=>"conselho federal de fonoaudiologia", "607"=>"fundacao universidade de itauna", "590"=>"universidade de cuiaba", "9062"=>"faculdade de ciencias gerenciais", "16"=>"centro universitario de lavras", "405"=>"centro universitario una", "9131"=>"centro universitario carioca", "369"=>"faculdade de educacao da bahia", "7977"=>"instituto de fisica teorica unesp", "616"=>"king s college london", "685"=>"faculdade de medicina de petropolis", "299"=>"centro universitario franciscano do parana", "313"=>"faculdade teologica batista do parana", "1190"=>"faculdade bethencourt da silva", "336"=>"centro de ensino unificado de brasilia", "926"=>"faculdade de medicina de campos", "596"=>"centro universitario da fundacao educacional de barretos", "9006"=>"instituto nacional de cardiologia", "1205"=>"centro universitario euro americano", "1034"=>"universidade vale do rio doce", "230"=>"faculdade de economia e financas ibmec", "7961"=>"academia da forca aerea", "7964"=>"university of victoria", "178"=>"instituto brasileiro de administracao municipal", "203"=>"centro universitario augusto motta", "860"=>"washington state university", "426"=>"centro nacional de pesquisa em energia e materiais", "547"=>"empresa brasileira de pesquisa agropecuaria", "210"=>"faculdades integradas silva e souza", "453"=>"tufts university", "212"=>"instituto nacional de tecnologia", "1193"=>"escola brasileira de administracao publica e de empresas", "524"=>"institut pasteur", "1143"=>"institut de recherche pour le developpement", "186"=>"faculdades integradas simonsen", "232"=>"instituto de engenharia nuclear", "9280"=>"sociedade brasileira de fisiologia", "180"=>"sociedade brasileira de pediatria", "1089"=>"faculdade de jandaia do sul", "9337"=>"faculdade de tecnologia e ciencias de feira de santana", "643"=>"fundacao instituto brasileiro de geografia e estatistica", "835"=>"faculdades integradas regionais de avare", "731"=>"centro universitario de rio preto", "9207"=>"sociedade brasileira de matematica", "137"=>"faculdade de informatica e administracao paulista", "1228"=>"escola de engenharia de lorena da usp", "654"=>"centro tecnico aeroespacial", "334"=>"instituto de pesquisa economica aplicada", "7897"=>"instituto federal do piaui", "9107"=>"faculdade de jaguariuna", "534"=>"centro universitario salesiano de sao paulo", "332"=>"conselho federal de psicologia", "9169"=>"faculdade campos eliseos", "126"=>"colegio objetivo", "1179"=>"faculdade de musica carlos gomes", "655"=>"conselho regional de odontologia de sao paulo", "9119"=>"faculdade sao marcos", "113"=>"escola tecnica federal de sao paulo", "9174"=>"escola de economia de sao paulo da fundacao getulio vargas", "7929"=>"faculdade de direito da alta paulista", "775"=>"centro universitario euripedes de marilia", "9171"=>"fundacao antonio prudente hospital a c camargo", "138"=>"faculdade de ciencias da saude de sao paulo", "338"=>"instituto de pesquisa economica aplicada df", "703"=>"colegio sao luis", "9273"=>"faculdade de educacao e ciencias gerenciais de indaiatuba", "1171"=>"exercito brasileiro", "97"=>"centro universitario italo brasileiro", "9331"=>"faculdade senac pernambuco", "1004"=>"faculdade de ciencias humanas de olinda", "709"=>"universidade nilton lins", "710"=>"instituto de tecnologia da amazonia", "468"=>"irmandade da santa casa de misericordia de porto alegre", "473"=>"faculdade porto alegrense", "1000"=>"universidade do oeste de santa catarina", "472"=>"faculdade porto alegrense de educacao ciencias e letras", "337"=>"instituto brasiliense de direito publico", "881"=>"centro universitario leonardo da vinci", "335"=>"coordenacao de aperfeicoamento de pessoal de nivel superior", "467"=>"centro universitario ritter dos reis", "752"=>"centro universitario fundacao santo andre", "9346"=>"faculdade sul brasil", "747"=>"faculdade estadual de ciencias e letras de campo mourao", "301"=>"faculdade de artes do parana", "9285"=>"instituto agronomico", "8968"=>"faculdade da regiao dos lagos", "923"=>"instituto federal fluminense", "782"=>"centro universitario central paulista", "1117"=>"fundacao faculdade de agronomia luiz meneghel", "1072"=>"faculdades integradas de patos", "582"=>"fundacao hospitalar do distrito federal", "515"=>"faculdade de filosofia ciencias e letras barao de maua", "298"=>"faculdades integradas espirita", "326"=>"ministerio da educacao", "810"=>"faculdade de filosofia ciencias e letras dom bosco", "918"=>"universidade estadual do parana", "305"=>"colegio dom bosco", "666"=>"instituto federal de educacao ciencia e tecnologia do rio grande do sul", "292"=>"centro universitario internacional", "1068"=>"centro regional universitario de espirito santo do pinhal", "1206"=>"faculdade michelangelo", "1204"=>"escola superior de ciencias da saude", "9246"=>"faculdade fortium", "342"=>"uniao pioneira de integracao social", "1213"=>"instituto superior de ciencias da saude", "9086"=>"faculdade metodista granbery", "8947"=>"instituto unificado de ensino superior objetivo", "811"=>"academia militar das agulhas negras", "927"=>"centro universitario univates", "9069"=>"escola de sociologia e politica de sao paulo", "889"=>"faculdade de odontologia de lins", "318"=>"faculdade de direito de vitoria", "769"=>"universidade vila velha", "8927"=>"faculdades integradas de vitoria", "9228"=>"faculdade estacio de sa de vila velha", "7895"=>"centro de ensino superior de maringa", "131"=>"colegio santa cruz", "9300"=>"faculdade anhanguera de taboao da serra", "7965"=>"faculdade de tecnologia de americana", "12"=>"faculdade de tecnologia senac florianopolis", "9302"=>"universidade da integracao internacional da lusofonia afro brasileira", "1015"=>"centro universitario de votuporanga", "917"=>"faculdade estadual de educacao ciencias e letras de paranavai", "864"=>"universidade de cruz alta", "1216"=>"fundacao santa casa de misericordia do para", "413"=>"centro universitario do estado do para", "945"=>"instituto evandro chagas", "7942"=>"instituto superior do litoral do parana", "187"=>"hospital dos servidores do estado", "1123"=>"faculdade de filosofia ciencias e letras de sao jose do rio pardo", "196"=>"federacao brasileira das sociedades de ginecologia e obstetricia", "8965"=>"universidade regional de blumenau", "7924"=>"sociedade educacional de santa catarina", "645"=>"universidade comunitaria da regiao de chapeco", "970"=>"centro universitario da grande dourados", "9226"=>"faculdade barao do rio branco", "9024"=>"faculdade santa emilia de rodat", "9190"=>"faculdade de tecnologia de jundiai", "8963"=>"centro universitario padre anchieta", "962"=>"universidade federal do pampa", "1119"=>"faculdade de direito milton campos", "8943"=>"escola de estudos superiores de vicosa", "403"=>"centro universitario de belo horizonte", "1001"=>"national institute of health", "372"=>"faculdade ruy barbosa", "1194"=>"faculdade brasileira de ciencias juridicas", "9150"=>"instituto de ciencias da saude", "695"=>"escola de engenharia de piracicaba", "9"=>"escola tecnica federal de santa catarina", "721"=>"universidade estadual do piaui", "9243"=>"instituto de ensino e pesquisa", "1054"=>"fundacao educacional monsenhor messias", "9038"=>"faculdade de tecnologia de jahu", "1097"=>"universidade estadual de alagoas", "225"=>"faculdades integradas de jacarepagua", "152"=>"faculdade paulista de servico social", "1198"=>"faculdades integradas de bauru", "9349"=>"faculdade de educacao de tangara da serra", "310"=>"faculdades spei", "7940"=>"faculdade nossa cidade", "628"=>"centro de estudos superiores de maceio", "576"=>"instituto federal de educacao ciencia e tecnologia do ceara", "9156"=>"faculdade asces", "718"=>"faculdade inga", "8955"=>"faculdade pio decimo", "737"=>"faculdade sao luis de franca", "370"=>"faculdade einstein", "574"=>"instituto federal do ceara reitoria", "1079"=>"faculdades integradas maria imaculada", "746"=>"centro universitario do leste de minas gerais", "135"=>"centro universitario claretiano", "7912"=>"faculdades integradas pitagoras", "757"=>"faculdade de direito de franca", "8950"=>"faculdade de tecnologia de piracicaba", "8971"=>"centro universitario toledo", "276"=>"fundacao educacional de bauru", "9175"=>"faculdade batista do rio de janeiro", "1155"=>"centro universitario de formiga", "9370"=>"instituto superior de educacao de cajazeiras", "9299"=>"faculdade de juazeiro do norte", "1102"=>"faculdade de filosofia santa doroteia", "674"=>"centro universitario filadelfia", "9375"=>"escola superior em meio ambiente", "1059"=>"universidade de rio verde", "724"=>"centro universitario de anapolis", "8932"=>"faculdade teologica batista de brasilia", "9345"=>"faculdades integradas de itarare", "873"=>"centro universitario de volta redonda", "9091"=>"faculdade entre rios do piaui", "1014"=>"universidade estadual do rio grande do sul", "9048"=>"faculdade de ciencias biomedicas de cacoal", "9101"=>"faculdade de administracao de governador valadares", "794"=>"faculdade do clube nautico mogiano", "1145"=>"universidade federal do vale do sao francisco", "9060"=>"instituto municipal de ensino superior de assis", "492"=>"faculdade de filosofia nossa senhora da imaculada conceicao", "712"=>"centro universitario do norte", "9090"=>"faculdade metropolitana de manaus", "7888"=>"faculdade arthur thomas", "241"=>"empresa de pesquisa agropecuaria de minas gerais", "296"=>"faculdade de direito de curitiba", "735"=>"faculdade atlantico", "9328"=>"centro brasileiro de estudos latino americanos", "7949"=>"faculdade de filosofia ciencias e letras de mandaguari", "9330"=>"faculdade teologica batista equatorial", "8948"=>"fundo de defesa da citricultura", "9261"=>"faculdade de pato branco", "8977"=>"faculdades integradas do vale do ribeira", "7907"=>"faculdades integradas de sao carlos", "858"=>"centro universitario de brusque", "9256"=>"faculdade integrado de campo mourao", "821"=>"centro universitario la salle", "1132"=>"faculdade de direito de conselheiro lafaiete", "621"=>"instituto federal de educacao ciencia e tecnologia de goias", "912"=>"centro universitario luterano de palmas", "833"=>"faculdade de guanambi", "7923"=>"faculdade de direito de sorocaba", "729"=>"centro universitario do norte paulista", "8946"=>"fundacao universidade federal de mato grosso do sul", "9025"=>"faculdade catolica de fortaleza", "683"=>"instituto teologico franciscano", "8970"=>"centro universitario catolico salesiano auxilium", "1207"=>"faculdade albert einstein", "9016"=>"faculdade de ciencias da bahia", "9088"=>"faculdade de informatica de cuiaba", "9109"=>"instituto luterano de ensino superior de itumbiara", "1091"=>"faculdade estadual de filosofia ciencias e letras de paranagua", "9061"=>"centro universitario de jales", "9064"=>"instituto de ensino superior e pesquisa", "9214"=>"centro de estudos e sistemas avancados do recife", "9385"=>"faculdade damas da instrucao crista", "622"=>"instituto federal goiano", "1024"=>"faculdade de filosofia ciencias e letras de catanduva", "7905"=>"centro universitario de itajuba", "9074"=>"centro universitario de bauru", "9053"=>"centro universitario luterano de ji parana", "9137"=>"faculdade integrada brasil amazonia", "1115"=>"faculdade kurios", "1234"=>"faculdade de ciencias biologicas e da saude", "117"=>"instituto federal de sao paulo", "9123"=>"faculdade de administracao e ciencias contabeis de sao roque", "9154"=>"faculdade de engenharia de passos", "417"=>"faculdade ideal", "8991"=>"faculdade de filosofia e ciencias humanas de goiatuba", "9000"=>"escola superior de artes celia helena", "220"=>"colegio pedro ii", "7904"=>"centro universitario anhanguera", "9179"=>"faculdade anhanguera de taubate", "143"=>"faculdade paulista de artes", "892"=>"faculdade estadual de ciencias economicas de apucarana", "9247"=>"centro universitario planalto do distrito federal", "344"=>"faculdade de tecnologia equipe darwin", "930"=>"instituto de pesquisas ecologicas", "578"=>"faculdade integrada da grande fortaleza"}
end
rows = file.split("\n")
bar = ProgressBar.new(rows.length)
max_value = 0
rows[1..-1].each{|row|
	row = row.split(",")
	bar.increment!
	next if row[2] != "degree"
	source = row[0].to_i
	target = row[1].to_i
	year = row[-1].to_i
	# names2[row[0]] = row[-3] if names2[row[0]].nil?
	# names2[row[1]] = row[-2] if names2[row[1]].nil?
	flow[year] ||= []
	flow[year][source] ||= []
	flow[year][source][target] = row[6].to_i
	flow_all[source] ||= []
	flow_all[source][target] ||= 0
	flow_all[source][target] += row[6].to_i
	max_value = row[6].to_i if row[6].to_i > max_value
}
# byebug

## CREATE RECORDS BY EACH YEARS
# years = (1950..2013)
# years = (2008..2010)
years = (2013..2013)
bar = ProgressBar.new(years.size)
years.each{|year|
	bar.increment!
	csv_string = CSV.generate(:col_sep => ",") do |csv|
		if kind_index == "code"
			csv << ["codes"]+names.keys
		else
			csv << ["names"]+names.values
		end
		names.keys.each{|index1|
			if kind_index == "code"
				row = [index1]
			else
				row = [names[index1]]
			end
			names.keys.each{|index2|
				if flow[year].nil? or
					flow[year][index1.to_i].nil? or
					flow[year][index1.to_i][index2.to_i].nil?
					row += [0]
				else
					temp = flow[year][index1.to_i][index2.to_i].to_i
					temp = change_value(temp,kind_change)
					row += [temp.to_i]
				end
			}
			csv << row
		}
	end
	if kind_index == "code"
		# File.write("edges-flow-#{kind_data}/data-code/edges-flow-#{kind_data}-distance-year-#{year}-code.csv", csv_string)
	else
		# File.write("edges-flow-#{kind_data}/data-name/edges-flow-#{kind_data}-distance-year-#{year}-names.csv", csv_string)
	end

	# csv_string.gsub!(",","\";\"")
	# csv_string.gsub!("\n","\"\n\"")
	# csv_string = "\"#{csv_string}\""
	# csv_string.gsub!(".",",")

	# File.write("edges-flow-#{kind_data}/edges-flow-#{kind_data}-distance-year-#{year}2.csv", csv_string)
}


## CREATE ALL RECORDS BY ALL YEARS
csv_string_all = CSV.generate(:col_sep => ",") do |csv|
	if kind_index == "code"
		csv << ["codes"]+names.keys
	else
		csv << ["names"]+names.values
	end
	names.keys.each{|index1|
		if kind_index == "code"
			row = [index1]
		else
			row = [names[index1]]
		end
		names.keys.each{|index2|
			if flow_all[index1.to_i].nil? or
				flow_all[index1.to_i][index2.to_i].nil?
				row += [0]
			else
				temp = flow_all[index1.to_i][index2.to_i].to_i
				temp = change_value(temp,kind_change)
				row += [temp.to_i]
			end
		}
		csv << row
	}
end
if kind_index == "code"
	# File.write("edges-flow-#{kind_data}/data-code/edges-flow-#{kind_data}-distance-year-all-code.csv", csv_string_all)
else
	# File.write("edges-flow-#{kind_data}/data-name/edges-flow-#{kind_data}-distance-year-all-names.csv", csv_string_all)
end


## CREATE CHART
# years.each{|year|
# 	if kind_change == nil
# 		create_chart(year, change_value(max_value,kind_change), kind_data, true, "-normal")
# 	elsif kind_change == "cube_root"
# 		create_chart(year, change_value(max_value,kind_change), kind_data, true, "-cbrt")
# 	elsif kind_change == "square_root"
# 		create_chart(year, change_value(max_value,kind_change), kind_data, true, "-sqrt")
# 	end
# }



## CREATE ALL RECORDS BY EACH YEARS
counts_flow = []
counts_flow << ["source","target"]+years.to_a+["all"]
names.keys.each{|index1|
	all_years = 0
	names.keys.each{|index2|
		if kind_index == "code"
			row = [index1,index2]
		else
			row = [names[index1],names[index2]]
		end
		years.each{|year|
			if flow[year].nil? or
				flow[year][index1.to_i].nil? or
				flow[year][index1.to_i][index2.to_i].nil?
				row += [0]
			else
				temp = flow[year][index1.to_i][index2.to_i].to_i
				temp = change_value(temp,kind_change)
				row += [temp.to_i]
				all_years += temp.to_i
			end
		}
		row += [all_years.to_i]
		counts_flow << row
	}
}
csv_string = CSV.generate(:col_sep => ",") do |csv|
	counts_flow.each{|row|
		csv << row
	}
end
if kind_index == "code"
	# File.write("edges-flow-#{kind_data}/data-code/edges-flow-#{kind_data}-distance-years-code.csv", csv_string)
	File.write("edges-flow-#{kind_data}/data-code/edges-flow-#{kind_data}-distance-years-code-br.csv", csv_string)
else
	# File.write("edges-flow-#{kind_data}/data-name/edges-flow-#{kind_data}-distance-years-names.csv", csv_string)
	File.write("edges-flow-#{kind_data}/data-name/edges-flow-#{kind_data}-distance-years-names-br.csv", csv_string)
end
# csv_string.gsub!(",","\";\"")
# csv_string.gsub!("\n","\"\n\"")
# csv_string = "\"#{csv_string}\""
# csv_string.gsub!(".",",")
# File.write("edges-flow-#{kind_data}/edges-flow-#{kind_data}-distance-years2.csv", csv_string)



## CREATE ANIMATION GIF
# puts "######## Create animation"
# `convert -delay 300 -loop 0 edges-flow-#{kind_data}/edges-flow-#{kind_data}-distance-year-*.png edges-flow-#{kind_data}/animaion.gif`


puts "fim"